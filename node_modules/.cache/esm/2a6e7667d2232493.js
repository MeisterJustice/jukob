let getIndex,getLogin,getsignup,getLogout,getProfile,putProfile,getProfileSettings,postsignup,postLogin,deleteUser,getProfileShow,getCustom,errorHandler,isLoggedIn,checkIfUserExists,isValidPassword;_d22‍.w("../controllers",[["getIndex",["getIndex"],function(v){getIndex=v}],["getLogin",["getLogin"],function(v){getLogin=v}],["getsignup",["getsignup"],function(v){getsignup=v}],["getLogout",["getLogout"],function(v){getLogout=v}],["getProfile",["getProfile"],function(v){getProfile=v}],["putProfile",["putProfile"],function(v){putProfile=v}],["getProfileSettings",["getProfileSettings"],function(v){getProfileSettings=v}],["postsignup",["postsignup"],function(v){postsignup=v}],["postLogin",["postLogin"],function(v){postLogin=v}],["deleteUser",["deleteUser"],function(v){deleteUser=v}],["getProfileShow",["getProfileShow"],function(v){getProfileShow=v}],["getCustom",["getCustom"],function(v){getCustom=v}]]);_d22‍.w("../middleware",[["errorHandler",["errorHandler"],function(v){errorHandler=v}]]);_d22‍.w("../validation/index",[["isLoggedIn",["isLoggedIn"],function(v){isLoggedIn=v}],["checkIfUserExists",["checkIfUserExists"],function(v){checkIfUserExists=v}],["isValidPassword",["isValidPassword"],function(v){isValidPassword=v}]]);const express = require('express');
const router = express.Router();
const multer = require('multer');
const { storage } = require('../config/cloudinary');
const upload = multer({ storage });


























router.get('/', errorHandler(getIndex));

router.post('/', errorHandler(getCustom));

router.get('/login', errorHandler(getLogin));

router.post('/login', errorHandler(postLogin));

router.get('/signup', errorHandler(getsignup));

router.post('/signup', errorHandler(checkIfUserExists), upload.single('image'), errorHandler(postsignup));

router.get('/logout', errorHandler(getLogout));

router.get('/profile', isLoggedIn, errorHandler(getProfile));

router.get('/profile/settings', isLoggedIn, errorHandler(getProfileSettings));

router.get('/profile/:id', errorHandler(getProfileShow));

router.put('/profile', isLoggedIn, upload.single('image'), errorHandler(isValidPassword), errorHandler(putProfile));

router.delete('/profile/delete', isLoggedIn, errorHandler(deleteUser));


module.exports = router;


